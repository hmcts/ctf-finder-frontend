{% from "govuk/components/back-link/macro.njk" import govukBackLink %}
{% from "govuk/components/input/macro.njk" import govukInput %}
{% from "govuk/components/button/macro.njk" import govukButton %}
{% from "macros/error-summary.njk" import errorSummary %}

{% extends "template.njk" %}

{% block pageTitle %}
  {{ title }}
{% endblock %}

{% block beforeContent %}
  {{ super() }}

  {{ govukBackLink({
    text: "Back",
    href: '/search-option'
  }) }}
{% endblock %}

{% block content %}
{% if errors %}
  {{ errorSummary(error.title, error.text, "#search") }}
{% endif %}

<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">
    <h1 class="govuk-heading-l">{{ question }}
      <span id="header-hint" class="govuk-hint">
        {{ hint }}
      </span>
    </h1>
    <form method="GET" action="/search-for-location">
      {{ govukInput({
        label: {
          text: text,
          classes: "govuk-label--m",
          isPageHeading: true
        },
        classes: "govuk-input govuk-!-width-three-quarters",
        id: "search",
        name: "search",
        errorMessage: { text: error.text | safe } if errors
        }) }}
        {{ govukButton({
          text: button,
          classes: "govuk-!-margin-top-2 govuk-!-margin-bottom-8"
      }) }}
    </form>

    {% if (path !== '/location-search') and (results.length > 0) %}
      <p class="govuk-body">{{ foundResults | safe }}</p>
      <hr class="govuk-section-break govuk-section-break--l govuk-section-break--visible">
      {% for item in results %}
        <h2 class="govuk-heading-m">
          <a class="govuk-link" href="{{ item.name }}">{{ item.name }}</a>
        </h2>
      {% endfor %}
    {% elif (path !== '/location-search') %}
      <p class="govuk-body-m govuk-!-font-weight-bold">{{ noResults.p1 }}</p>
      <p class="govuk-body">{{ noResults.p2 }}</p>
      <ul class="govuk-list govuk-list--bullet">
      {% for item, text in noResults.list %}
        <li>{{ text | safe }}</li>
      {% endfor %}
      </ul>
    {% endif %}
  </div>
</div>

{% endblock %}
